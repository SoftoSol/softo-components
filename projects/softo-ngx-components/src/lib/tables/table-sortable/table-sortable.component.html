<div class="card">
  <div class="card-header card-header-primary card-header-icon">
    <div class="card-icon" *ngIf="icon != null">
      <i class="material-icons">{{ icon }}</i>
    </div>
    <div class="d-flex justify-content-between align-items-baseline">
      <h4 class="card-title">{{ title }}</h4>

      <div class="d-flex align-items-center">
        <div *ngIf="showFilter">
          <div class="form-outline mx-1">
            <input
              type="search"
              id="form1"
              class="form-control"
              placeholder="Search"
              name="search"
              [(ngModel)]="searchText"
            />
          </div>
        </div>

        <div class="toolbar d-none d-md-block">
          <button
            *ngFor="let action of tableActions"
            [class]="'btn mx-1' + (action.classes ?? '')"
            (click)="action.onClick()"
          >
            <span class="button-text">{{ action.label }}</span>
          </button>
        </div>
      </div>
    </div>
    <div class="toolbar d-block d-md-none" style="text-align: right">
      <button
        *ngFor="let action of tableActions"
        [class]="'btn ' + (action.classes ?? '')"
        (click)="action.onClick()"
      >
        <span class="button-text">{{ action.label }}</span>
      </button>
    </div>
  </div>
  <div class="card-body">
    <div class="material-datatables">
      <table
        id="datatables"
        class="table table-striped table-no-bordered table-hover"
        cellspacing="0"
        width="100%"
        style="width: 100%"
      >
        <thead>
          <tr>
            <th
              *ngFor="let row of header"
              [class]="colHeadClass(row)"
              (click)="sortData(row)"
            >
              {{ row.title }}
              <span *ngIf="row.sortable" class="arrow-container"
                ><p [class]="'arrow ' + row.sortDir"></p
              ></span>
            </th>
            <th *ngIf="rowActions.length > 0" class="disabled-sorting">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="loading; else data">
            <td colspan="100%" class="text-center">
              <span>{{
                dataLoadingMessage ? dataLoadingMessage : "Loading..."
              }}</span>
            </td>
          </tr>

          <ng-template #data>
            <tr *ngIf="rows.length === 0">
              <td colspan="100%" class="text-center">
                <span>{{
                  noDataMessage ? noDataMessage : "No Data Found..."
                }}</span>
              </td>
            </tr>
            <tr *ngFor="let row of rows | filter: searchText">
              <td
                *ngFor="let col of header; index as i"
                [attr.data-label]="col.title"
              >
                <div
                  *ngIf="col.type == ColumnType.Html"
                  [innerHtml]="getAsSafeHtml(col.value(row))"
                ></div>
                <div *ngIf="col.type == ColumnType.Text">
                  {{ col.value(row) }}
                </div>
              </td>

              <td data-label="Actions">
                <ng-container *ngFor="let action of rowActions">
                  <a
                    href="javascript:void(0)"
                    [class]="getActionClasses(action)"
                    [title]="action.tooltip"
                    *ngIf="action?.show == undefined ? true : action?.show(row)"
                    [innerHtml]="action.icon"
                    (click)="action.onClick(row)"
                  ></a>
                </ng-container>
              </td>
            </tr>
          </ng-template>
        </tbody>

        <tfoot *ngIf="!loading">
          <td [colSpan]="header.length + (rowActions.length > 0 ? 1 : 0)">
            <mat-paginator
              [length]="config.length"
              [pageSize]="config.size"
              [pageSizeOptions]="config.sizes"
              (page)="onPagniatorChange($event)"
              aria-label="Select page"
            >
            </mat-paginator>
          </td>
        </tfoot>
        <tfoot *ngIf="!loading">
          <td *ngFor="let val of footer">{{ val }}</td>
        </tfoot>
      </table>
    </div>
  </div>
  <!-- end content-->
</div>
<!--  end card  -->
